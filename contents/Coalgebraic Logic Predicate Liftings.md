# Coalgebraic Logic: Predicate Liftings

(previous [Coalgebraic Logic: Introduction](https://hackmd.io/@alexhkurz/r1t-Y6f8L) ... next [monotone predicate liftings](https://hackmd.io/@alexhkurz/Sk4WH_fNd))

## Definition

A $n$-ary predicate lifting for a functor $T:\sf Set\to Set$ is a natural transformation 
$${2^n}^X\to 2^{TX}$$

It follows from the Yoneda lemma that natural transformations are in bijection with functions
$$T(2^n)\to 2$$

How can we see that maps $T(2^n)\to 2$ are in fact nothing but modal operators?

Let $X\to TX$ a be coalgebra and $\phi$ a collection of $n$ predicates $\phi_i:X\to 2$. 

Then the semantic of an $n$-ary predicate lifting $\triangle: T(2^n)\to 2$ as a  "modal predicate" $$\triangle \phi$$

is given by
$$X\longrightarrow TX\stackrel {T\phi_i}\longrightarrow T2\stackrel\triangle\longrightarrow 2$$

A good way to understand what is going on here is to explicitely calculate all unary predicate liftings of the powerset functor.

## Example

Let $T=\mathcal P$ be the powerset functor.

We see right away that there are 16 modal operators
$$\mathcal P2\to 2$$

because that is the cardinality of the set of functions of type $\mathcal P2\to 2$.

We are interested in explicitely describing all modal operators $\triangle:\mathcal P2\to 2$ taking predicates $\phi:X\to 2$ to $$\mathcal PX\stackrel {\mathcal P\phi}\longrightarrow \mathcal P2\stackrel\triangle\longrightarrow 2$$

We need to know that $\mathcal P\phi$ takes direct image. This tells us how to interpret the 4 possible results of applying $\mathcal P \phi$ to a set $S$ of successors. Writing $2=\{0,1\}$, if $(\mathcal P\phi)S$ is [^aristotle]
- $\{0,1\}$ then some successors are outside of $\phi$ and some are inside of $\phi$. 
- $\{0\}$ then all and some successors are out.
- $\{1\}$ then all and some successors are in. 
- $\{\}$ then there are no successors.  


For the purpose of further calculations I propose the following abbreviations: $$\varnothing=\{\},f=\{0\},t=\{1\},\top=\{0,1\}$$

for the elements of $\mathcal P2$. 

**Exercise:** (Assumes familiarity with the classical definition of the modal operators $\Box$ and $\Diamond$). Show that $\varnothing,t\mapsto 1$ defines $\Box$ and that $t,\top\mapsto 1$ defines $\Diamond$. [^zero]

Modal logic is expressive up to bisimilarity and this means here that all modal operators $\mathcal P2\to 2$ are generated by $\Box$ and $\Diamond$. Let us try to support this with some examples:

**Exercise:** Using $\Box,\Diamond$ as well as propositional connectives, express the predicate liftings $\triangle_\sigma$ defined by $\sigma\mapsto 1$ where $\sigma$ ranges over $\{\varnothing,f,t,\top\}$. Also show that $\Diamond=\neg\Box\neg$.

Our next concern is to better understand the lattice (Boolean algebra) of all unary modal operators of the powerset functor $\mathcal P$. 

We already noted that there are 16 modal operators $P2\to 2$ and we exhibited some salient examples.

From general facts about Boolean algebras we can deduce the following. The Boolean algebra of modal operators $P2\to 2$ is isomorphic to the free Boolean algebra on two generators, which I call $\sf o$ and $\sf i$. These generators combine to the atoms of the Boolean algebra as [^generators]
$$\sf o\wedge i, o\wedge\neg i, \neg o\wedge i, \neg o\wedge\neg i$$

Every element of the Boolean algebra of modal operators is a join of these atoms.

**Exercise:** Define an isomorphism between predicate liftings/modal operators $P2\to 2$ and the free Boolean algebra generated by $\{\sf o,i\}$ which maps $\Box$ to $\neg\sf o$ and $\Diamond$ to $\sf i$.

The isomorphism has been chosen in such a way that the generator $\sf o$ is interpreted as "some and all successors are **o**utside of $\phi$" and $\sf i$ as "some and all successors are **i**nside". This choice of interpretation is ultimately suggested by how the functor $\mathcal P$ acts on $\phi$ (as direct image).

**Summary:** We introduced some notation for the set $\mathcal P2$:

![](https://i.imgur.com/au4kXiQ.png =400x)

Morevoer, we identified unary modal operators with subsets of $\mathcal P2$. For example,
- $\Box=\{\varnothing,t\}$ ("nothing out")
- $\Diamond = \{t,\top\}$ ("at least one in")

**A puzzle:** If we equip $\mathcal P2$ with the inclusion order, then $\Box$ is not a monotone function $\mathcal P2 \to 2$ (when $2$ is ordered as $0<1$). On the other hand, we do know that $\Box$ is a monotone modal operator in the sense that [^monotonebox]
$$\frac{\phi\to\psi}{\Box\phi\to\Box\psi}$$

This puzzle will be resolved in a follow up note on [monotone predicate liftings](https://hackmd.io/@alexhkurz/Sk4WH_fNd).


[^aristotle]: This reminds me of the [square of opposition]() in Aristotelian logic. $\{1\}$ corresponds to $\phi$ "belongs to all successors", $\{0\}$ to $\phi$ "belongs to no successors", $\top$ to "belongs to some but not all". As far as I understand (not my area of expertise) Aristotle's logic does not admit $\varnothing$.

[^zero]: Here and in the following all elements not explicitly mentioned are sent to $0$.

[^generators]: We map the elements $\varnothing,f,t,\top\in\mathcal P2$ to conjunctions of generators as follows. $\varnothing \mapsto \sf \neg o\wedge\neg i$, $f\mapsto \sf o\wedge\neg i$, $t\mapsto \sf\neg o\wedge i$, $\top\mapsto \sf o\wedge i$. Intuitively, $\varnothing$ means "no successor", $f$ means "all successors outside of $\phi", $t$ means "all successors inside $\phi$", $\top$ means "some successors outside, some inside". 

[^monotonebox]: It also makes sense to replace $\to$ by $\le$ if we think of predicates as propositional functions to $2=\{0<1\}$.



